{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"C:/Users/Fabio Mendes/Documents/lista-compras/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Fabio Mendes/Documents/lista-compras/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Fabio Mendes/Documents/lista-compras/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Fabio Mendes/Documents/lista-compras/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Fabio Mendes/Documents/lista-compras/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ReactDOM from'react-dom';import'./style.css';import imagem from'./remove.png';/*\r\nfunction Item (props) {\r\n    const [produto, setProduto] = useState(props.produto)\r\n    const [qtd, setQtd] = useState(props.qtd)\r\n    return <div className=\"umItem\">\r\n        <input type=\"checkbox\" name=\"riscar\" id=\"\"></input>\r\n        <input type=\"text\" value={produto} className=\"campo\" id=\"tfProd\" onChange={e => setProduto(e.target.value)}></input>\r\n        <label for=\"preco\"> R$ </label>\r\n        <input id=\"preco\" type=\"text\" className=\"campo\" id=\"tfPreco\" onChange={e =>{props.somaPreco(+e.target.value)}}></input>\r\n        <label for=\"qtd\">   Qtd. </label>\r\n        <input id=\"qtd\" type=\"number\" min=\"1\" value={qtd} className=\"campo\" id=\"tfQtd\" onChange={e => setQtd(e.target.value)}></input>\r\n        <span> Subtotal R$ </span>\r\n    </div>\r\n}\r\n\r\nclass Lista extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            total: 0.00\r\n        }\r\n    }\r\n    \r\n    soma = (novoValor, valorAntigo) => {\r\n        this.setState({\r\n            total: (this.state.total - valorAntigo) + novoValor\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lista\">\r\n                <div className=\"divHeaderLista\">{\"Título da lista\"}\r\n                    <br/>\r\n                    Adicionar item <input type=\"text\" className=\"campoHeaderItem\"></input> Qtd. <input type=\"number\" min=\"1\" className=\"campoHeaderQtd\"></input> <button className=\"btnAdicionar\">Adicionar</button>\r\n                </div>\r\n                <div className=\"conteudo\">\r\n                    <Item produto=\"Pão de batata\"\r\n                        qtd=\"3\"\r\n                        somaPreco={this.soma}></Item>\r\n                    <Item produto=\"Sanduiche\"\r\n                        preco=\"5,42\"\r\n                        qtd=\"1\"\r\n                        somaPreco={this.soma}></Item>\r\n                </div>\r\n                <div>Total R$ {this.state.total}</div>\r\n            </div>\r\n        )\r\n    }\r\n}*/var Lista=/*#__PURE__*/function(_React$Component){_inherits(Lista,_React$Component);var _super=_createSuper(Lista);function Lista(props){var _this;_classCallCheck(this,Lista);_this=_super.call(this,props);_this.soma=function(indice,novoValor){//alert(\"indice: \" + indice + \"; novo valor: \" + novoValor);\n//var subTotalAntigo;\n_this.setState({total:_this.state.total-_this.state.itens[indice].subTotal+_this.state.itens[indice].qtd*novoValor});_this.setState(function(state){var itens=state.itens.map(function(item,pos){if(pos===indice){//alert(\"índice: \" + pos + \"; novo valor: \" + novoValor + \"; valor antigo: \" + item.preco);\n//Esse trecho exibe um warning no console\n//this.state.total = (this.state.total - item.subTotal) + (item.qtd * novoValor);\n//Abaixo está a correção do warning\n//this.setState({total: (this.state.total - item.subTotal) + (item.qtd * novoValor)})\n//subTotalAntigo = item.subTotal;\nitem.subTotal=item.qtd*novoValor;item.preco=novoValor;return item;}else{return item;}});//fim da funçao map\nreturn{itens:itens};});//fim de setState\n//this.setState({total: (this.state.total - subTotalAntigo) + (this.state.itens[indice].qtd * novoValor)})\n};_this.modificaQtd=function(indice,novoQtd){_this.setState({total:_this.state.total-_this.state.itens[indice].subTotal+_this.state.itens[indice].preco*novoQtd});_this.setState(function(state){var itens=state.itens.map(function(item,pos){if(pos===indice){//A linha abaixo dispara um warning no console\n//this.state.total = (this.state.total - item.subTotal) + (item.preco * novoQtd);\n//A linha abaixo corrige as mensagens de warning\n//this.setState({total: (this.state.total - item.subTotal) + (item.preco * novoQtd)})\nitem.subTotal=item.preco*novoQtd;item.qtd=novoQtd;return item;}else{return item;}});//fim de map\nreturn{itens:itens};});//fim do setState\n};_this.deletaItem=function(indice,produto,subtotal){if(window.confirm(\"Deseja deletar o item \"+produto+\"?\")){_this.setState({total:_this.state.total-subtotal});_this.setState(function(state){var itens=state.itens.filter(function(item,pos){return indice!==pos;});/*this.setState(state => ({\r\n              total: this.state.total - subtotal\r\n            }));*/return{itens:itens};});}};_this.modificaProduto=function(indice,novoNome){_this.setState(function(state){var itens=state.itens.map(function(item,pos){if(pos===indice){item.produto=novoNome;return item;}else{return item;}});//fim de map\nreturn{itens:itens};});//fim do setState\n};_this.riscarItem=function(indice){_this.setState(function(state){var itens=state.itens.map(function(item,pos){if(pos===indice){item.riscado=!item.riscado;return item;}else{return item;}});//fim de map\nreturn{itens:itens};});//fim do setState\n};_this.state={itens:[],produto:'',qtd:1,total:0.00};_this.setProduto=_this.setProduto.bind(_assertThisInitialized(_this));_this.setQtd=_this.setQtd.bind(_assertThisInitialized(_this));_this.adicionarItem=_this.adicionarItem.bind(_assertThisInitialized(_this));return _this;}_createClass(Lista,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"lista\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"divHeaderLista\",children:[\"Título da lista\",/*#__PURE__*/_jsx(\"br\",{}),\"Adicionar item \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"campoHeaderItem\",onChange:this.setProduto,value:this.state.produto}),\" Qtd. \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",className:\"campoHeaderQtd\",onChange:this.setQtd,value:this.state.qtd}),\" \",/*#__PURE__*/_jsx(\"button\",{className:\"btnAdicionar\",onClick:this.adicionarItem,children:\"Adicionar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"conteudo\",children:/*#__PURE__*/_jsx(Item,{itens:this.state.itens,somaPreco:this.soma,modQtd:this.modificaQtd,del:this.deletaItem,modProd:this.modificaProduto,risca:this.riscarItem})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Total R$ \",this.state.total]})]});//fim do return\n}//fim do render\n},{key:\"setProduto\",value:function setProduto(e){this.setState({produto:e.target.value});}},{key:\"setQtd\",value:function setQtd(e){this.setState({qtd:e.target.value});}},{key:\"adicionarItem\",value:function adicionarItem(e){e.preventDefault();if(this.state.produto.length===0){return;}var newItem={produto:this.state.produto,id:Date.now(),qtd:this.state.qtd,preco:0.00,subTotal:0.00,riscado:false};this.setState(function(state){return{itens:state.itens.concat(newItem),produto:'',qtd:1};});}//fim do método adicionarItem()\n}]);return Lista;}(React.Component);//fim da classe (component) lista\nfunction Item(props){return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",props.itens.map(function(item,indice){return/*#__PURE__*/ (//antes era umItem\n_jsxs(\"div\",{className:\"umItem\",style:{opacity:item.riscado?0.5:1},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"riscar\",id:\"\",onChange:function onChange(e){props.risca(indice);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:item.produto,className:\"campo\",id:\"tfProd\",onChange:function onChange(e){props.modProd(indice,e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"preco\",children:\" R$ \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"campo\",id:\"tfPreco\",onChange:function onChange(e){props.somaPreco(indice,+e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"qtd\",children:\"   Qtd. \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.qtd,min:\"1\",className:\"campo\",id:\"tfQtd\",onChange:function onChange(e){props.modQtd(indice,+e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{children:\" Subtotal R$ \"}),\" \",item.subTotal,/*#__PURE__*/_jsx(\"a\",{href:\"/#\",id:\"linkDel\",onClick:function onClick(e){props.del(indice,item.produto,item.subTotal);},children:/*#__PURE__*/_jsx(\"img\",{src:imagem,alt:\"Remover\",height:\"20px\"})})]},item.id));})]});}ReactDOM.render(/*#__PURE__*/_jsx(Lista,{}),document.getElementById('root'));","map":{"version":3,"sources":["C:/Users/Fabio Mendes/Documents/lista-compras/src/index.js"],"names":["React","ReactDOM","imagem","Lista","props","soma","indice","novoValor","setState","total","state","itens","subTotal","qtd","map","item","pos","preco","modificaQtd","novoQtd","deletaItem","produto","subtotal","window","confirm","filter","modificaProduto","novoNome","riscarItem","riscado","setProduto","bind","setQtd","adicionarItem","e","target","value","preventDefault","length","newItem","id","Date","now","concat","Component","Item","opacity","risca","modProd","somaPreco","modQtd","del","render","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style.css'\r\nimport imagem from './remove.png';\r\n\r\n/*\r\nfunction Item (props) {\r\n    const [produto, setProduto] = useState(props.produto)\r\n    const [qtd, setQtd] = useState(props.qtd)\r\n    return <div className=\"umItem\">\r\n        <input type=\"checkbox\" name=\"riscar\" id=\"\"></input>\r\n        <input type=\"text\" value={produto} className=\"campo\" id=\"tfProd\" onChange={e => setProduto(e.target.value)}></input>\r\n        <label for=\"preco\"> R$ </label>\r\n        <input id=\"preco\" type=\"text\" className=\"campo\" id=\"tfPreco\" onChange={e =>{props.somaPreco(+e.target.value)}}></input>\r\n        <label for=\"qtd\">   Qtd. </label>\r\n        <input id=\"qtd\" type=\"number\" min=\"1\" value={qtd} className=\"campo\" id=\"tfQtd\" onChange={e => setQtd(e.target.value)}></input>\r\n        <span> Subtotal R$ </span>\r\n    </div>\r\n}\r\n\r\nclass Lista extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            total: 0.00\r\n        }\r\n    }\r\n    \r\n    soma = (novoValor, valorAntigo) => {\r\n        this.setState({\r\n            total: (this.state.total - valorAntigo) + novoValor\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lista\">\r\n                <div className=\"divHeaderLista\">{\"Título da lista\"}\r\n                    <br/>\r\n                    Adicionar item <input type=\"text\" className=\"campoHeaderItem\"></input> Qtd. <input type=\"number\" min=\"1\" className=\"campoHeaderQtd\"></input> <button className=\"btnAdicionar\">Adicionar</button>\r\n                </div>\r\n                <div className=\"conteudo\">\r\n                    <Item produto=\"Pão de batata\"\r\n                        qtd=\"3\"\r\n                        somaPreco={this.soma}></Item>\r\n                    <Item produto=\"Sanduiche\"\r\n                        preco=\"5,42\"\r\n                        qtd=\"1\"\r\n                        somaPreco={this.soma}></Item>\r\n                </div>\r\n                <div>Total R$ {this.state.total}</div>\r\n            </div>\r\n        )\r\n    }\r\n}*/\r\n\r\nclass Lista extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = { itens: [], produto: '', qtd: 1, total: 0.00};\r\n        this.setProduto = this.setProduto.bind(this);\r\n        this.setQtd =this.setQtd.bind(this);\r\n        this.adicionarItem = this.adicionarItem.bind(this);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"lista\">\r\n                <div className=\"divHeaderLista\">{\"Título da lista\"}\r\n                    <br/>\r\n                    Adicionar item <input type=\"text\" className=\"campoHeaderItem\" onChange={this.setProduto} value={this.state.produto}></input> Qtd. <input type=\"number\" min=\"1\" className=\"campoHeaderQtd\" onChange={this.setQtd} value={this.state.qtd}></input> <button className=\"btnAdicionar\" onClick={this.adicionarItem}>Adicionar</button>\r\n                </div>\r\n                <div className=\"conteudo\">\r\n                    <Item itens={this.state.itens} \r\n                          somaPreco={this.soma} \r\n                          modQtd={this.modificaQtd} \r\n                          del={this.deletaItem} \r\n                          modProd={this.modificaProduto}\r\n                          risca={this.riscarItem}/>\r\n                </div>\r\n                <div>Total R$ {this.state.total}</div>\r\n            \r\n\r\n          {/*<div>\r\n            <h3>Tarefas</h3>\r\n            <TodoList items={this.state.items} />\r\n            <form onSubmit={this.handleSubmit}>\r\n              <label htmlFor=\"new-todo\">\r\n                O que precisa ser feito?\r\n              </label>\r\n              <input\r\n                id=\"new-todo\"\r\n                onChange={this.handleChange}\r\n                value={this.state.text}\r\n              />\r\n              <button>\r\n                Adicionar #{this.state.items.length + 1}\r\n              </button>\r\n            </form>\r\n          </div>*/}\r\n\r\n            </div>\r\n        );//fim do return\r\n      }//fim do render\r\n\r\n      setProduto(e) {\r\n        this.setState({ produto: e.target.value });\r\n      }\r\n\r\n      setQtd(e){\r\n        this.setState({ qtd: e.target.value });\r\n      }\r\n\r\n      adicionarItem(e) {\r\n        e.preventDefault();\r\n        if (this.state.produto.length === 0) {\r\n          return;\r\n        }\r\n        const newItem = {\r\n          produto: this.state.produto,\r\n          id: Date.now(),\r\n          qtd: this.state.qtd,\r\n          preco: 0.00,\r\n          subTotal: 0.00,\r\n          riscado: false\r\n        };\r\n        this.setState(state => ({\r\n          itens: state.itens.concat(newItem),\r\n          produto: '',\r\n          qtd: 1\r\n        }));\r\n      }//fim do método adicionarItem()\r\n\r\n      soma = (indice, novoValor) => {\r\n        //alert(\"indice: \" + indice + \"; novo valor: \" + novoValor);\r\n        //var subTotalAntigo;\r\n        this.setState({total: (this.state.total - this.state.itens[indice].subTotal) + (this.state.itens[indice].qtd * novoValor)})\r\n        this.setState( state => {\r\n          const itens = state.itens.map( (item, pos) => {\r\n            if(pos === indice){\r\n              //alert(\"índice: \" + pos + \"; novo valor: \" + novoValor + \"; valor antigo: \" + item.preco);\r\n\r\n              //Esse trecho exibe um warning no console\r\n              //this.state.total = (this.state.total - item.subTotal) + (item.qtd * novoValor);\r\n              //Abaixo está a correção do warning\r\n              //this.setState({total: (this.state.total - item.subTotal) + (item.qtd * novoValor)})\r\n\r\n              //subTotalAntigo = item.subTotal;\r\n\r\n              item.subTotal = item.qtd * novoValor;\r\n              item.preco = novoValor;\r\n              return item;\r\n            } else {\r\n              return item;\r\n            }\r\n          });//fim da funçao map\r\n\r\n          return{\r\n            itens,\r\n          };\r\n\r\n        });//fim de setState\r\n        //this.setState({total: (this.state.total - subTotalAntigo) + (this.state.itens[indice].qtd * novoValor)})\r\n\r\n      }//fim da funçao soma\r\n\r\n      modificaQtd = (indice, novoQtd) => {\r\n        this.setState({total: (this.state.total - this.state.itens[indice].subTotal) + (this.state.itens[indice].preco * novoQtd)})\r\n        this.setState( state => {\r\n          const itens = state.itens.map( (item, pos) => {\r\n            if(pos === indice){\r\n              //A linha abaixo dispara um warning no console\r\n              //this.state.total = (this.state.total - item.subTotal) + (item.preco * novoQtd);\r\n              //A linha abaixo corrige as mensagens de warning\r\n              //this.setState({total: (this.state.total - item.subTotal) + (item.preco * novoQtd)})\r\n              item.subTotal = item.preco * novoQtd;\r\n              item.qtd = novoQtd;\r\n              return item;\r\n            } else {\r\n              return item;\r\n            }\r\n          });//fim de map\r\n\r\n          return{\r\n            itens,\r\n          };\r\n        });//fim do setState\r\n      }\r\n\r\n      deletaItem = (indice, produto, subtotal) => {\r\n        \r\n        if( window.confirm(\"Deseja deletar o item \" + produto + \"?\") ) {\r\n          this.setState({total: this.state.total - subtotal});\r\n          this.setState(state => {\r\n            const itens = state.itens.filter((item, pos) => indice !== pos);\r\n            /*this.setState(state => ({\r\n              total: this.state.total - subtotal\r\n            }));*/\r\n            return {\r\n              itens,\r\n            };\r\n          });\r\n        }\r\n      };\r\n\r\n      modificaProduto = (indice, novoNome) => {\r\n        this.setState( state => {\r\n          const itens = state.itens.map( (item, pos) => {\r\n            if(pos === indice){\r\n              item.produto = novoNome;\r\n              return item;\r\n            } else {\r\n              return item;\r\n            }\r\n          });//fim de map\r\n\r\n          return{\r\n            itens,\r\n          };\r\n        });//fim do setState\r\n      }\r\n\r\n      riscarItem = (indice) => {\r\n        this.setState( state => {\r\n          const itens = state.itens.map( (item, pos) => {\r\n            if(pos === indice){\r\n              item.riscado = !item.riscado;\r\n              return item;\r\n            } else {\r\n              return item;\r\n            }\r\n          });//fim de map\r\n\r\n          return{\r\n            itens,\r\n          };\r\n        });//fim do setState\r\n      }\r\n\r\n}//fim da classe (component) lista\r\n\r\nfunction Item (props) {\r\n    \r\n    return <> {props.itens.map( (item, indice) => (\r\n            //antes era umItem\r\n            <div className=\"umItem\" key={item.id} style={{opacity: item.riscado ? 0.5 : 1}}>\r\n                <input type=\"checkbox\" name=\"riscar\" id=\"\" onChange={e => {props.risca(indice)}}></input>\r\n                <input type=\"text\" defaultValue={item.produto} className=\"campo\" id=\"tfProd\" onChange={e => {props.modProd(indice, e.target.value)} }></input>\r\n                <label htmlFor=\"preco\"> R$ </label>\r\n                <input type=\"text\" className=\"campo\" id=\"tfPreco\" onChange={e =>{props.somaPreco(indice, +e.target.value)}}></input>\r\n                <label htmlFor=\"qtd\">   Qtd. </label>\r\n                <input type=\"number\" value={item.qtd} min=\"1\" className=\"campo\" id=\"tfQtd\" onChange={e =>{props.modQtd(indice, +e.target.value)}}></input>\r\n                <span> Subtotal R$ </span> {item.subTotal}\r\n                <a href=\"/#\" id=\"linkDel\" onClick={e => {props.del(indice, item.produto, item.subTotal)} }>\r\n                  <img src={imagem} alt={\"Remover\"} height={\"20px\"}/>\r\n                </a>\r\n           </div>\r\n           ))}\r\n          </>\r\n}\r\n\r\nReactDOM.render(\r\n    <Lista></Lista>,\r\n    document.getElementById('root')\r\n)\r\n"]},"metadata":{},"sourceType":"module"}